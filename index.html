<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CodeAI - Your AI Code Playground</title>
<style>
/* ----- RESET & VARIABLES ----- */
* { margin:0; padding:0; box-sizing:border-box; }
:root {
  --primary-bg:#0a0a0f; --secondary-bg:#1a1a2e; --accent-bg:#16213e;
  --neon-blue:#00d4ff; --neon-purple:#8b5cf6; --neon-green:#00ff88;
  --text-primary:#ffffff; --text-secondary:#a0a0a0; --border-color:#2a2a3e;
}
body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--primary-bg); color: var(--text-primary); overflow-x:hidden; transition:0.3s;}
body.light-theme { --primary-bg:#ffffff; --secondary-bg:#f8fafc; --accent-bg:#e2e8f0; --text-primary:#1a202c; --text-secondary:#4a5568; --border-color:#e2e8f0; }

/* ----- WELCOME SCREEN ----- */
.welcome-screen {position:fixed; top:0; left:0;width:100%; height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; background:var(--primary-bg); z-index:1000; transition:0.8s;}
.welcome-screen.fade-out {opacity:0; transform:scale(0.95); pointer-events:none;}
.welcome-content{text-align:center;}
.ai-logo{width:120px;height:120px;margin-bottom:1rem; background:linear-gradient(45deg,var(--neon-blue),var(--neon-purple)); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:3rem;}
.welcome-title{font-size:3rem; font-weight:bold; margin-bottom:0.5rem; background:linear-gradient(45deg,var(--neon-blue),var(--neon-purple)); -webkit-background-clip:text; -webkit-text-fill-color:transparent;}
.start-btn{background:linear-gradient(45deg,var(--neon-blue),var(--neon-purple)); color:white; border:none; padding:12px 30px; font-size:1.2rem; border-radius:50px; cursor:pointer; margin-top:1rem;}

/* ----- APP LAYOUT ----- */
.app-container { display:none; min-height:100vh; }
.app-container.active{display:block;}

/* ----- HEADER ----- */
.header{background:var(--secondary-bg); padding:1rem 2rem; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid var(--border-color);}
.header .logo { font-size:1.5rem; font-weight:bold; color:var(--neon-blue);}
.header-controls{display:flex; gap:10px;}
.control-btn{background:var(--accent-bg); border:1px solid var(--border-color); padding:6px 14px; border-radius:6px; cursor:pointer; color:var(--text-primary);}
.control-btn:hover{background:var(--neon-blue); color:white;}
.theme-toggle{background:none; border:none; color:var(--text-primary); cursor:pointer; font-size:1.3rem;}

/* ----- MAIN CONTENT ----- */
.main-content{display:flex; gap:1rem; padding:1rem;}

/* ----- EDITOR SECTION ----- */
.editor-section{flex:2; display:flex; flex-direction:column; gap:1rem;}
.editor-toolbar{display:flex; gap:10px;}
.tab{background:var(--accent-bg); border:none; color:var(--text-secondary); padding:6px 14px; border-radius:6px; cursor:pointer;}
.tab.active{background:var(--neon-blue); color:white;}
.editor-wrapper{display:flex; height:400px; background:var(--secondary-bg); border:1px solid var(--border-color); border-radius:8px; overflow:hidden;}
#lineNumbers{background:var(--accent-bg); padding:10px; color:var(--text-secondary); text-align:right; font-family:monospace; user-select:none; overflow:hidden;}
#codeTextarea{flex:1; border:none; outline:none; padding:10px; background:transparent; color:var(--text-primary); font-family:monospace; resize:none; overflow:auto; font-size:1rem;}

/* ----- OUTPUT ----- */
.output-section{margin-top:1rem;}
.output-toolbar{margin-bottom:5px;}
iframe#outputFrame{width:100%; height:400px; border:1px solid var(--border-color); border-radius:8px; background:white;}

/* ----- AI BUTTON & CHAT ----- */
.ai-btn{position:fixed; bottom:20px; right:20px; background:var(--neon-green); border:none; padding:12px; border-radius:50%; cursor:pointer; font-size:1.5rem; color:white; z-index:200;}
.ai-chat-box{position:fixed; bottom:80px; right:20px; width:300px; height:400px; background:var(--secondary-bg); border:1px solid var(--border-color); border-radius:12px; display:none; flex-direction:column; z-index:200;}
.ai-chat-box #chatArea{flex:1; overflow-y:auto; padding:10px; display:flex; flex-direction:column; gap:6px;}
.ai-chat-box #chatInput{border:none; outline:none; padding:10px; border-top:1px solid var(--border-color); background:var(--secondary-bg); color:var(--text-primary);}
.chat-message{padding:6px 10px; border-radius:12px; max-width:80%; word-break:break-word;}
.chat-message.user{background:var(--neon-blue); color:white; align-self:flex-end;}
.chat-message.ai{background:var(--accent-bg); color:white; align-self:flex-start;}
</style>
</head>
<body>

<div class="welcome-screen" id="welcomeScreen">
  <div class="welcome-content">
    <div class="ai-logo">ðŸ’»</div>
    <div class="welcome-title">CodeAI</div>
    <button class="start-btn" onclick="startApp()">Start Coding</button>
  </div>
</div>

<div class="app-container" id="appContainer">

  <div class="header">
    <div class="logo">CodeAI</div>
    <div class="header-controls">
      <button class="control-btn" onclick="runCode()">Run</button>
      <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()">ðŸŒ™</button>
    </div>
  </div>

  <div class="main-content">

    <!-- EDITOR -->
    <div class="editor-section">
      <div class="editor-toolbar">
        <button class="tab active" onclick="switchLanguage('html',this)">HTML</button>
        <button class="tab" onclick="switchLanguage('css',this)">CSS</button>
        <button class="tab" onclick="switchLanguage('js',this)">JS</button>
        <button class="tab" onclick="switchLanguage('c',this)">C</button>
        <button class="tab" onclick="switchLanguage('cpp',this)">C++</button>
        <button class="tab" onclick="switchLanguage('java',this)">Java</button>
      </div>
      <div class="editor-wrapper">
        <pre id="lineNumbers">1</pre>
        <textarea id="codeTextarea" oninput="updateLineNumbers()" onscroll="syncScroll()"></textarea>
      </div>
      <div class="output-section">
        <div class="output-toolbar">Live Preview:</div>
        <iframe id="outputFrame"></iframe>
      </div>
    </div>

  </div>
</div>

<!-- AI Floating Button -->
<button class="ai-btn" onclick="toggleAI()">ðŸ¤–</button>
<div class="ai-chat-box" id="aiChatBox">
  <div id="chatArea"></div>
  <input type="text" id="chatInput" placeholder="Ask AI..." onkeydown="handleChatInput(event)">
</div>

<script>
// ----------------- GLOBAL -----------------
let currentLanguage='html';
const codeData={html:'',css:'',js:'',c:'// C code placeholder', cpp:'// C++ code placeholder', java:'// Java code placeholder'};

// ----------------- WELCOME -----------------
function startApp(){document.getElementById('welcomeScreen').classList.add('fade-out'); setTimeout(()=>{document.getElementById('welcomeScreen').style.display='none'; document.getElementById('appContainer').classList.add('active'); loadTemplate('html');},800);}

// ----------------- LANGUAGE -----------------
function switchLanguage(lang,btn){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  btn.classList.add('active');
  codeData[currentLanguage]=document.getElementById('codeTextarea').value;
  currentLanguage=lang;
  document.getElementById('codeTextarea').value=codeData[lang]||'';
  updateLineNumbers();
}

// ----------------- LINE NUMBERS -----------------
function updateLineNumbers(){
  const textarea=document.getElementById('codeTextarea');
  const lineNumbers=document.getElementById('lineNumbers');
  const lines=textarea.value.split('\n').length;
  let numbers='';
  for(let i=1;i<=lines;i++)numbers+=i+'\n';
  lineNumbers.textContent=numbers;
}
function syncScroll(){document.getElementById('lineNumbers').scrollTop=document.getElementById('codeTextarea').scrollTop;}

// ----------------- RUN CODE -----------------
function runCode(){
  codeData[currentLanguage]=document.getElementById('codeTextarea').value;
  const iframe=document.getElementById('outputFrame');
  if(['html','css','js'].includes(currentLanguage)){
    const html=codeData.html;
    const css=`<style>${codeData.css}</style>`;
    const js=`<script>${codeData.js}<\/script>`;
    iframe.srcdoc=html+css+js;
  } else {
    iframe.srcdoc=`<pre style="color:#00d4ff;padding:10px;">Running ${currentLanguage} code is not supported in browser. Use a backend compiler.</pre>`;
  }
}

// ----------------- LOAD TEMPLATE -----------------
function loadTemplate(lang){document.getElementById('codeTextarea').value=codeData[lang]||''; updateLineNumbers(); runCode();}

// ----------------- THEME -----------------
function toggleTheme(){document.body.classList.toggle('light-theme'); document.getElementById('themeToggle').textContent=document.body.classList.contains('light-theme')?'ðŸŒž':'ðŸŒ™';}

// ----------------- AI BUTTON -----------------
function toggleAI(){
  const box=document.getElementById('aiChatBox');
  box.style.display=box.style.display==='flex'?'none':'flex';
}

// ----------------- AI CHAT -----------------
const aiResponses={general:["Try a loop","Check variable names","Use functions"], html:["Use semantic tags"], css:["Try flexbox"], js:["Check console"]};
function handleChatInput(e){if(e.key==='Enter')sendMessage();}
function sendMessage(){
  const input=document.getElementById('chatInput');
  const chatArea=document.getElementById('chatArea');
  const msg=input.value.trim(); if(!msg)return;
  const userMsg=document.createElement('div'); userMsg.className='chat-message user'; userMsg.textContent=msg;
  chatArea.appendChild(userMsg); input.value=''; chatArea.scrollTop=chatArea.scrollHeight;
  setTimeout(()=>{
    const aiMsg=document.createElement('div'); aiMsg.className='chat-message ai';
    const responses=aiResponses[currentLanguage]||aiResponses.general;
    aiMsg.textContent=responses[Math.floor(Math.random()*responses.length)];
    chatArea.appendChild(aiMsg); chatArea.scrollTop=chatArea.scrollHeight;
  },400);
}
</script>
</body>
</html>
