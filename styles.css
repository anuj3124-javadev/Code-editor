/* ----- RESET & VARIABLES ----- */
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --primary-bg:#0a0a0f;--secondary-bg:#1a1a2e;--accent-bg:#16213e;
  --neon-blue:#00d4ff;--neon-purple:#8b5cf6;--neon-green:#00ff88;
  --text-primary:#fff;--text-secondary:#a0a0a0;--border-color:#2a2a3e;
  --ok:#10b981;--warn:#f59e0b;--err:#ef4444;
}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:var(--primary-bg);color:var(--text-primary);overflow-x:hidden;transition:.3s}
body.light-theme{--primary-bg:#fff;--secondary-bg:#f8fafc;--accent-bg:#e2e8f0;--text-primary:#111827;--text-secondary:#4b5563;--border-color:#e5e7eb}

/* ----- ANIMATED BACKGROUND ----- */
.animated-bg{position:fixed;inset:0;z-index:-1;background:linear-gradient(45deg,var(--primary-bg),var(--secondary-bg))}
.animated-bg::before{
  content:"";position:absolute;inset:0;
  background:
    radial-gradient(circle at 20% 20%,rgba(0,212,255,.12)0%,transparent 50%),
    radial-gradient(circle at 80% 80%,rgba(139,92,246,.12)0%,transparent 50%),
    radial-gradient(circle at 40% 60%,rgba(0,255,136,.07)0%,transparent 50%);
  animation:backgroundPulse 8s ease-in-out infinite
}
@keyframes backgroundPulse{0%,100%{opacity:.6}50%{opacity:1}}

/* ----- WELCOME ----- */
.welcome-screen{position:fixed;inset:0;display:grid;place-items:center;background:var(--primary-bg);z-index:1000;transition:.8s}
.welcome-screen.fade-out{opacity:0;transform:scale(.97);pointer-events:none}
.welcome-content{text-align:center;animation:welcomeUp 1s ease-out}
@keyframes welcomeUp{from{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}
.ai-logo{width:120px;height:120px;margin:0 auto 1.25rem;background:linear-gradient(45deg,var(--neon-blue),var(--neon-purple));border-radius:9999px;display:grid;place-items:center;font-size:42px;animation:float 3s ease-in-out infinite;box-shadow:0 0 50px rgba(0,212,255,.28)}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
.welcome-title{font-size:clamp(32px,6vw,56px);font-weight:800;margin:.5rem 0;background:linear-gradient(45deg,var(--neon-blue),var(--neon-purple));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;animation:glow 2s ease-in-out infinite alternate}
@keyframes glow{from{filter:brightness(1)}to{filter:brightness(1.25)}}
.welcome-subtitle{color:var(--text-secondary);margin-bottom:1.75rem}
.start-btn{background:linear-gradient(45deg,var(--neon-blue),var(--neon-purple));color:#fff;border:0;padding:14px 34px;border-radius:9999px;cursor:pointer;font-weight:700;letter-spacing:.5px;box-shadow:0 8px 30px rgba(0,212,255,.35);transition:.25s;animation:pulse 2s ease-in-out infinite}
.start-btn:hover{transform:translateY(-2px)}
@keyframes pulse{0%,100%{box-shadow:0 8px 30px rgba(0,212,255,.35)}50%{box-shadow:0 10px 40px rgba(0,212,255,.55)}}

/* ----- APP LAYOUT ----- */
.app-container{display:none;min-height:100vh;grid-template-rows:auto 1fr auto}
.app-container.active{display:grid;animation:fadeIn .8s}
@keyframes fadeIn{from{opacity:.2}to{opacity:1}}

/* HEADER */
.header{background:var(--secondary-bg);border-bottom:1px solid var(--border-color);padding:12px 20px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100}
.logo{display:flex;align-items:center;gap:10px;font-weight:800;color:var(--neon-blue)}
.logo-icon{width:36px;height:36px;border-radius:10px;background:linear-gradient(45deg,var(--neon-blue),var(--neon-purple));display:grid;place-items:center;animation:spin 10s linear infinite}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
.header-controls{display:flex;gap:10px}
.control-btn{background:var(--accent-bg);border:1px solid var(--border-color);color:var(--text-primary);padding:8px 14px;border-radius:9px;cursor:pointer;transition:.2s}
.control-btn:hover{background:var(--neon-blue);color:#001018;transform:translateY(-1px);box-shadow:0 6px 16px rgba(0,212,255,.25)}
.theme-toggle{background:none;border:0;color:var(--text-primary);font-size:20px;cursor:pointer;padding:6px 8px;border-radius:50%}
.theme-toggle:hover{background:var(--accent-bg)}

/* MAIN */
.main-content{display:grid;grid-template-columns:1fr 380px;gap:1rem;padding:1rem;min-height:calc(100vh - 120px)}
@media(max-width:1100px){.main-content{grid-template-columns:1fr}}

/* EDITOR */
.editor-section{display:grid;grid-template-rows:auto 1fr auto auto;gap:10px}
.editor-toolbar{background:var(--secondary-bg);border:1px solid var(--border-color);border-radius:12px;padding:10px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:10px}
.language-tabs{display:flex;gap:8px;flex-wrap:wrap}
.tab{background:var(--accent-bg);border:0;color:var(--text-secondary);padding:7px 12px;border-radius:7px;cursor:pointer;font-size:.9rem}
.tab.active{background:var(--neon-blue);color:#001018;font-weight:700}
.editor-wrapper{display:flex;height:360px;background:var(--secondary-bg);border:1px solid var(--border-color);border-radius:12px;overflow:hidden}
#lineNumbers{width:48px;background:var(--accent-bg);padding:10px;color:var(--text-secondary);text-align:right;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;user-select:none;overflow:auto}
#codeTextarea{flex:1;border:0;outline:0;padding:10px;background:transparent;color:var(--text-primary);font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;resize:none;overflow:auto}
.run-btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(45deg,var(--neon-green),#00cc70);border:0;color:#00160e;padding:9px 14px;border-radius:8px;cursor:pointer;font-weight:800}
.run-btn:hover{filter:brightness(1.1)}

/* OUTPUT */
.output-section{display:grid;gap:8px}
.output-toolbar{display:flex;align-items:center;justify-content:space-between}
.preview{width:100%;height:min(60vh,720px); /* bigger preview */ border:1px solid var(--border-color);border-radius:12px;background:#fff}
.terminal{background:#0b1220;border:1px solid var(--border-color);color:#e5e7eb;border-radius:12px;padding:10px;font-family:ui-monospace,monospace;height:240px;overflow:auto}
.status{font-size:.85rem;color:var(--text-secondary)}

/* RIGHT COLUMN: TEMPLATES + SETTINGS (AI moved to floating fab) */
.side-card{background:var(--secondary-bg);border:1px solid var(--border-color);border-radius:12px;overflow:hidden}
.side-title{padding:12px 14px;background:var(--accent-bg);font-weight:800}
.side-body{padding:12px}
.template-list{display:grid;gap:8px;max-height:260px;overflow:auto}
.template-item{display:flex;justify-content:space-between;align-items:center;background:var(--accent-bg);border:1px solid var(--border-color);border-radius:8px;padding:9px;cursor:pointer}
.template-item:hover{background:var(--neon-green);color:#002;transform:translateX(4px);box-shadow:0 4px 14px rgba(0,255,136,.28)}

/* Floating AI assistant */
.fab{position:fixed;right:18px;bottom:18px;width:54px;height:54px;border-radius:9999px;background:linear-gradient(45deg,var(--neon-purple),var(--neon-blue));display:grid;place-items:center;color:#fff;font-size:22px;cursor:pointer;box-shadow:0 10px 24px rgba(0,0,0,.35);z-index:1200}
.chat-pop{position:fixed;right:18px;bottom:86px;width:320px;max-height:430px;background:var(--secondary-bg);border:1px solid var(--border-color);border-radius:14px;display:none;flex-direction:column;overflow:hidden;z-index:1200;box-shadow:0 16px 40px rgba(0,0,0,.45);animation:chatIn .2s ease-out}
@keyframes chatIn{from{transform:translateY(8px);opacity:.6}to{transform:translateY(0);opacity:1}}
.chat-head{display:flex;align-items:center;gap:8px;padding:10px 12px;background:linear-gradient(45deg,var(--neon-purple),#7c3aed);color:#fff}
.chat-body{flex:1;display:flex;flex-direction:column;gap:8px;padding:10px;overflow:auto}
.bubble{padding:8px 10px;border-radius:12px;max-width:85%}
.bubble.ai{background:var(--accent-bg)}
.bubble.me{align-self:flex-end;background:var(--neon-blue);color:#001018}
.chat-foot{display:flex;gap:6px;padding:10px;border-top:1px solid var(--border-color)}
.chat-foot input{flex:1;background:var(--accent-bg);border:1px solid var(--border-color);border-radius:9999px;color:var(--text-primary);padding:8px 12px;outline:0}
.chat-foot button{background:var(--neon-purple);border:0;color:#fff;padding:8px 12px;border-radius:9999px;cursor:pointer}

/* Notifications */
.toast{position:fixed;top:16px;right:16px;background:var(--neon-blue);color:#001018;padding:12px 16px;border-radius:10px;box-shadow:0 14px 30px rgba(0,0,0,.35);z-index:1500}

/* Responsive tweaks */
@media(max-width:640px){.chat-pop{width:92vw}}